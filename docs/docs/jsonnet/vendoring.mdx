---
name: Vendoring
route: /jsonnet/vendoring
menu: Writing Jsonnet
---

# Vendoring

It is also possible to work with libraries outside of the current tree.

In the Jsonnet world, remote libraries are managed using
[`jsonnet-bundler`](https://github.com/jsonnet-bundler/jsonnet-bundler), a
package manager. It works very similar to `dep` and `glide` of Go, creating a
`vendor/` folder with each library copied into.

A package can be installed to the bundle with the following command:

```bash
$ jb install github.com/grafana/loki/production/ksonnet/promtail
```

This will put a package of the name `promtail` into `vendor/`

## Bundle

A bundle is a set of packages installed in a project. Packages are recorded in a
`jsonnetfile.json`, listing each directly required package.

`jsonnetfile.lock.json` on the other hand also records transient packaegs, git
commit hashes and `sha256` content checksums to make sure your bundle stays
predictable.

## Packages

A package is the smallest unit known to `jsonnet-bundler`. It consists of one or
more `.libsonnet` files, and a single `jsonnetfile.json`, which can be used to
specify transient dependencies.

Each package is uniquely identified using a `name` attribute, which corresponds
to the directory it is put into inside of `vendor/`.

Imporing packages can be done using the following syntax:

```jsonnet
import "<name>/<file>.libsonnet"
```

Usually packages are installed from `git`, but for development purposes `local`
packages are also supported:

```bash
$ jb install /path/to/package
```

## Dependency resolution

When two more or more packages depend on the same package (but perhaps different
versions), the first successful resolution of a package is used for all other as
well.  
For example if `foo` and `bar` both depend on `baz` but `foo` comes first in the
list, the package version specified by `foo` will be used by `bar` as well, even
if different.

This allows to easily force a package's version by manually installing the
desired one. Because it then appears in `jsonnetfile.json` it will always be the
first one during dependency resolution and takes precedence:

```bash
# force kausal.libsonnet to v0.1.0
$ jb install github.com/grafana/jsonnet-libs/ksonnet-util/kausal.libsonnet@v0.1.0
```
